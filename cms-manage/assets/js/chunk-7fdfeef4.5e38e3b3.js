(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fdfeef4"],{"00d5":function(e,t,a){},"04d1":function(e,t,a){var n=a("342f"),i=n.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"055e":function(e,t,a){"use strict";a("d171")},2362:function(e,t,a){},"24e9":function(e,t,a){},"2b05":function(e,t,a){e.exports=a.p+"assets/img/no_select.ed3c58d6.png"},"30d8":function(e,t,a){},"361b":function(e,t,a){"use strict";a("7a04")},4174:function(e,t,a){"use strict";a("2362")},"4e82":function(e,t,a){"use strict";var n=a("23e7"),i=a("e330"),o=a("59ed"),s=a("7b0b"),r=a("07fa"),c=a("577e"),l=a("d039"),u=a("addb"),d=a("a640"),p=a("04d1"),g=a("d998"),m=a("2d00"),f=a("512ce"),h=[],v=i(h.sort),b=i(h.push),C=l((function(){h.sort(void 0)})),_=l((function(){h.sort(null)})),I=d("sort"),k=!l((function(){if(m)return m<70;if(!(p&&p>3)){if(g)return!0;if(f)return f<603;var e,t,a,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(n=0;n<47;n++)h.push({k:t+n,v:a})}for(h.sort((function(e,t){return t.v-e.v})),n=0;n<h.length;n++)t=h[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),T=C||!_||!I||!k,E=function(e){return function(t,a){return void 0===a?-1:void 0===t?1:void 0!==e?+e(t,a)||0:c(t)>c(a)?1:-1}};n({target:"Array",proto:!0,forced:T},{sort:function(e){void 0!==e&&o(e);var t=s(this);if(k)return void 0===e?v(t):v(t,e);var a,n,i=[],c=r(t);for(n=0;n<c;n++)n in t&&b(i,t[n]);u(i,E(e)),a=i.length,n=0;while(n<a)t[n]=i[n++];while(n<c)delete t[n++];return t}})},"512ce":function(e,t,a){var n=a("342f"),i=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},"54b7":function(e,t,a){},"58cc":function(e,t,a){"use strict";a("00d5")},"5cfb":function(e,t,a){"use strict";a("5ece")},"5ece":function(e,t,a){},"7a04":function(e,t,a){},"8a60":function(e,t,a){"use strict";a("ea2f")},a589:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("PageHead"),a("PageLeft"),a("PageView"),a("PageRight"),a("UpLoadImg",{attrs:{"dialog-image-visible":e.dialogImageVisible},on:{"update:dialogImageVisible":function(t){e.dialogImageVisible=t},"update:dialog-image-visible":function(t){e.dialogImageVisible=t},upLoadImgSuccess:e.upLoadImgSuccess}})],1)},i=[],o=(a("d3b7"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-head"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.backToList}},[e._v(" 返回频道列表页面 ")]),a("div",{staticClass:"page-operate"},[a("el-button",{attrs:{type:"primary",size:"medium",loading:e.saveLoading},on:{click:e.saveAndContinue}},[e._v(" 保存 ")]),a("el-button",{attrs:{size:"medium",loading:e.previewLoading},on:{click:e.saveAndView}},[e._v(" 预览 ")])],1)],1)}),s=[],r=a("5530"),c=(a("4e82"),a("9e2a")),l={name:"PageHead",data:function(){return{onlineLoading:!1,saveLoading:!1,previewLoading:!1}},computed:{pageData:function(){return this.$store.state.pageData}},methods:{saveAndView:function(){var e=this;this.previewLoading=!0,this.savePage({online:1}).then((function(t){e.$message.success("上架成功");var a=t&&t.data?t.data.id:"";a?e.$router.push("/decorate?id=".concat(a)):a=e.$route.query.id,e.goToView(a)})).catch((function(t){e.$message.warning("上架并预览失败: ".concat(t.message))})).finally((function(){e.previewLoading=!1}))},goToView:function(e){var t=this.$router.resolve({path:"preview",query:{id:e}});window.open(t.href,"_blank")},saveAndContinue:function(){var e=this;this.saveLoading=!0,this.savePage().then((function(t){t.data;e.$message.success("保存成功")})).catch((function(t){e.$message.warning("保存失败: ".concat(t.message))})).finally((function(){e.saveLoading=!1}))},backToList:function(){try{var e=window.opener&&"#/home"===window.opener.location.hash;e&&window.opener.close(),this.$router.push("/home")}catch(t){this.$router.push("/home")}},savePage:function(e){var t=this,a=Object(r["a"])(Object(r["a"])({},this.pageData),{},{params:e});return a.componentList.forEach((function(e,t){e.sort=t})),Object(c["e"])(a).then((function(e){return e&&e.data&&e.data.id&&t.setIdForAddSave(e.data.id),e}))},setIdForAddSave:function(e){this.$router.push("/decorate?id=".concat(e));var t=Object(r["a"])({},this.pageData);t.id=e,this.$store.commit("UPDATE_COMPONENT",{data:t})}}},u=l,d=(a("055e"),a("2877")),p=Object(d["a"])(u,o,s,!1,null,"7a76d77c",null),g=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-left"},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.componentlist,(function(t,n){return a("el-collapse-item",{key:n,staticClass:"component-item",attrs:{title:t.title,name:n+1}},[a("ul",{staticClass:"component-list"},e._l(t.components,(function(t,n){return a("li",{key:n,class:e.draggableEnable(t)?"drag-enabled":"drag-disabled",attrs:{draggable:e.draggableEnable(t)},on:{dragstart:function(a){return e.onDragstart(t,a)},dragend:function(t){return e.onDragend(t)}}},[a("i",{class:t.iconClass,staticStyle:{"font-size":"28px"}}),a("p",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),a("p",{staticClass:"num"},[e._v(" "+e._s((e.componentMap[t.data.component]||0)+"/"+t.maxNumForAdd)+" ")])])})),0)])})),1)],1)},f=[],h=(a("e9c4"),50),v=[{title:"基础组件",components:[{name:"图片广告",iconClass:"cms-icon-ad",maxNumForAdd:h,data:{component:"Carousel",validTime:[],layout:"swiper",imageList:[{link:null,imageUrl:"",text:"导航1"}],imageMargin:0,isDefaultMargin:0,marginSize:[0,0],isBorderRadius:0,radius:0,backgroundColor:"",piclist:[]}},{name:"图文导航",maxNumForAdd:h,iconClass:"cms-icon-nav",data:{component:"ImageNav",validTime:[],layout:"pic",text:"",backgroundColor:"#FFFFFF",textColor:"#323233",columnPadding:20,rowPadding:20,lineNumber:4,borderRadius:0,imageList:[{link:null,imageUrl:"",text:"导航1"},{link:null,imageUrl:"",text:"导航2"},{link:null,imageUrl:"",text:"导航3"},{link:null,imageUrl:"",text:"导航4"}]}},{name:"文本",iconClass:"cms-icon-text",maxNumForAdd:h,data:{component:"RichText",validTime:[],backgroundColor:"",content:""}},{type:"AssistLine",iconClass:"cms-icon-line",maxNumForAdd:h,component:"AssistLine",name:"辅助线",data:{component:"AssistLine",validTime:[],type:1,paddingVisible:!1,defBorderColor:"#666",borderColor:"#666",borderStyle:"solid",defBackgroundColor:"",backgroundColor:"",height:10}},{name:"客服",iconClass:"cms-icon-online",maxNumForAdd:1,data:{component:"OnlineService",validTime:[],text:"客服",hideByPageScroll:!0}},{name:"商品",iconClass:"cms-icon-prod",maxNumForAdd:h,data:{component:"product",validTime:[],marginTop:0,exchangePriceColor:"#F5514B",productList:[],listStyle:"oneLineOne",markingPrice:0,purchase:0}},{name:"视频",iconClass:"iconfont icon-shipin",maxNumForAdd:h,data:{component:"Video",validTime:[],videoUrl:"",isAutoPlay:0,text:"视频",hideByPageScroll:!1}}]}],b=v,C=a("2f62"),_={name:"PageLeft",data:function(){return{componentlist:b,activeNames:[1,3]}},computed:Object(r["a"])({componentMap:function(){return this.$store.getters.pageComponentTotalMap}},Object(C["d"])(["dragComponent","addComponentIndex"])),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(C["c"])(["SET_DRAG_STATE","SET_DRAG_COMPONENT","SET_DRAG_INDEX","VIEW_SET_ACTIVE"])),Object(C["b"])(["pageChange"])),{},{onDragstart:function(e,t){console.log("开始拖动组件",e,t),this.SET_DRAG_STATE(!0),this.SET_DRAG_COMPONENT(JSON.parse(JSON.stringify(e)))},onDragend:function(e){this.SET_DRAG_STATE(!1);var t=this.addComponentIndex;null!=t&&(console.log("生成组件"),this.pageChange({type:"add",index:t,data:this.dragComponent}),this.SET_DRAG_INDEX(null),console.log("okok"),this.VIEW_SET_ACTIVE(t))},draggableEnable:function(e){var t=this.componentMap[e.data.component]||0;return t<e.maxNumForAdd}})},I=_,k=(a("58cc"),Object(d["a"])(I,m,f,!1,null,"7e25ca22",null)),T=k.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pageView",staticClass:"page-view"},[a("div",{staticClass:"preview"},[a("div",{staticClass:"preview-head"},[a("div",{staticClass:"preview-head-title"},[e._v(" "+e._s(e.pageData.name||"页面标题")+" ")])]),a("div",{staticClass:"preview-wrap"},[a("iframe",{staticClass:"preview-iframe",attrs:{id:"previewIframe",src:e.previewSrc,title:"频道名称",frameborder:"0",allowfullscreen:"",width:"100%",height:e.previewHeight},on:{load:e.onloadH5}})]),e.dragActive?a("div",{staticClass:"preview-drag-mask",on:{dragover:function(t){return e.onDragover(t)}}}):e._e(),e.dragActive?a("div",{staticClass:"preview-drag-out",on:{dragover:function(t){return e.onDragout(t)}}}):e._e()])])},w=[],P=a("f121"),y=a.n(P),x={name:"PageView",data:function(){return{showHasCache:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(C["d"])(["pageData","previewHeight","componentsTopList","dragActive","addComponentIndex"])),{},{previewSrc:function(){return y.a.decorateViewSrc+"?pageId=".concat(this.$route.query.id||"","&noLogin=true")}}),mounted:function(){this.initMessage()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(C["c"])(["SET_DRAG_INDEX","VIEW_ADD_PREVIEW","VIEW_DELETE_PREVIEW"])),Object(C["b"])(["initMessage"])),{},{onDragover:function(e){e.preventDefault();var t=191,a=this.$refs.pageView.scrollTop+e.pageY-t;console.log(a,"dropTop");for(var n=0,i=this.componentsTopList.length-1;i>=0;i--){var o=this.componentsTopList[i],s=this.componentsTopList[i-1]||0,r=(o-s)/2;if(0===i&&a<=r)break;if(a>o-r){n=i+1;break}}this.addComponentIndex!==n&&(console.log("预添加组件，索引值为",this.componentsTopList,n,a),this.SET_DRAG_INDEX(n),this.VIEW_ADD_PREVIEW(n))},onDragout:function(e){e.preventDefault(),null!=this.addComponentIndex&&(this.SET_DRAG_INDEX(null),this.VIEW_DELETE_PREVIEW())},onloadH5:function(){this.$store.commit("VIEW_UPDATE")}})},D=x,L=(a("f50a"),Object(d["a"])(D,E,w,!1,null,"fbfa72f2",null)),A=L.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-right"},[a("ChangeSetType",{model:{value:e.setType,callback:function(t){e.setType=t},expression:"setType"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.setType,expression:"setType === 1"}]},[a("SetPageInfo")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.setType,expression:"setType === 2"}]},[a("ComTitle",{attrs:{title:e.currentComponent&&e.currentComponent.name||"组件管理"}}),e.currentComponent?a("ComValidTime",{model:{value:e.currentComponent.data.validTime,callback:function(t){e.$set(e.currentComponent.data,"validTime",t)},expression:"currentComponent.data.validTime"}}):e._e(),e.currentComponent?a(e.currentComponent.data.component,{key:e.currentComponent.id,tag:"component",attrs:{parmes:e.currentComponent.data},on:{editComponent:e.editComponent}}):a("NoSelect")],1)],1)},O=[],$=(a("7db0"),a("ed08")),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"page-set-list"},[a("li",{class:{active:1===e.value},on:{click:function(t){return e.setActive(1)}}},[a("i",{staticClass:"icon page"}),e._v("页面设置 ")]),a("li",{class:{active:2===e.value},on:{click:function(t){return e.setActive(2)}}},[a("i",{staticClass:"icon component"}),e._v("组件管理 ")])])},j=[],V=(a("a9e3"),{name:"ChangeSetType",props:{value:{type:Number,default:1}},methods:{setActive:function(e){this.$emit("input",e)}}}),U=V,G=(a("4174"),Object(d["a"])(U,N,j,!1,null,"7dbb8e26",null)),F=G.exports,M=function(e,t){var a=t._c;return a("div",{staticClass:"component-title"},[t._v(" "+t._s(t.props.title)+" ")])},R=[],H=(a("361b"),{}),B=Object(d["a"])(H,M,R,!0,null,"5cffc816",null),W=B.exports,z=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"no-component"},[n("img",{attrs:{src:a("2b05")}}),e._v(" 暂无组件，请在页面中选择组件进行编辑 ")])}],J={name:"NoSelect"},X=J,K=(a("5cfb"),Object(d["a"])(X,z,q,!1,null,"2b6e1f98",null)),Q=K.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ComTitle",{attrs:{title:"页面设置"}}),a("ComGroup",{attrs:{title:"页面名称","name-black":"","content-block":""}},[a("el-input",{staticClass:"input-name",attrs:{placeholder:"请输入页面名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("ComGroup",{attrs:{title:"微信分享文案","name-black":"","content-block":""}},[a("el-input",{staticClass:"input-name",attrs:{maxlength:"28",placeholder:"用户通过微信分享给朋友时显示，最多28个汉字"},model:{value:e.shareDesc,callback:function(t){e.shareDesc=t},expression:"shareDesc"}})],1),a("ComGroup",{attrs:{title:"微信分享卡片",tips:"图片建议长宽比为5:4","name-black":"","content-block":""}},[a("el-button",{staticClass:"mr-15",attrs:{type:"text"},on:{click:function(t){e.shareImage=""}}},[e._v(" 重置 ")]),a("UpLoadBox",{attrs:{"img-url":e.shareImage},on:{"update:imgUrl":function(t){e.shareImage=t},"update:img-url":function(t){e.shareImage=t},editImg:function(t){return e.showDialogImage("shareImage")}}})],1),a("ComDivider"),a("ComGroup",{attrs:{title:"背景颜色"}},[a("el-button",{staticClass:"mr-15",attrs:{type:"text"},on:{click:function(t){e.backgroundColor=e.initBgColor}}},[e._v(" 重置 ")]),a("el-color-picker",{attrs:{size:"small"},model:{value:e.backgroundColor,callback:function(t){e.backgroundColor=t},expression:"backgroundColor"}})],1),a("ComGroup",{attrs:{title:"背景图片"}},[a("el-button",{staticClass:"mr-15",attrs:{type:"text"},on:{click:function(t){e.backgroundImage=""}}},[e._v(" 重置 ")]),a("UpLoadBox",{attrs:{"img-url":e.backgroundImage},on:{"update:imgUrl":function(t){e.backgroundImage=t},"update:img-url":function(t){e.backgroundImage=t},editImg:function(t){return e.showDialogImage("backgroundImage")}}})],1),e.backgroundImage?a("ComGroup",{attrs:{title:"背景图片位置"}},[a("el-radio",{attrs:{label:"top"},model:{value:e.backgroundPosition,callback:function(t){e.backgroundPosition=t},expression:"backgroundPosition"}},[e._v(" 居上 ")]),a("el-radio",{attrs:{label:"bottom"},model:{value:e.backgroundPosition,callback:function(t){e.backgroundPosition=t},expression:"backgroundPosition"}},[e._v(" 居底 ")])],1):e._e()],1)},Z=[],ee=(a("b0c0"),a("0df8")),te=a("9513"),ae=a("81ef"),ne={name:"SetPageInfo",components:{ComTitle:W,ComGroup:ee["a"],ComDivider:te["a"],UpLoadBox:ae["a"]},data:function(){return{initBgColor:""}},computed:{name:{get:function(){return this.$store.state.pageData.name},set:function(e){this.updatePageInfo({name:e})}},shareDesc:{get:function(){return this.$store.state.pageData.shareDesc},set:function(e){this.updatePageInfo({shareDesc:e})}},shareImage:{get:function(){return this.$store.state.pageData.shareImage},set:function(e){this.updatePageInfo({shareImage:e})}},backgroundColor:{get:function(){return this.$store.state.pageData.backgroundColor},set:function(e){this.updatePageInfo({backgroundColor:e})}},backgroundImage:{get:function(){return this.$store.state.pageData.backgroundImage},set:function(e){this.updatePageInfo({backgroundImage:e})}},backgroundPosition:{get:function(){return this.$store.state.pageData.backgroundPosition},set:function(e){this.updatePageInfo({backgroundPosition:e})}}},methods:{showDialogImage:function(e){this.$store.commit("SET_UPIMAGE_VISIBLE",!0),this.$store.commit("SET_UPIMAGE_FUC",this.upLoadImgSuccess),this.uploadKey=e,console.log("upload",e)},upLoadImgSuccess:function(e){this[this.uploadKey]=e},updatePageInfo:function(e){this.$store.commit("SET_PAGE_CONFIG",e)}}},ie=ne,oe=Object(d["a"])(ie,Y,Z,!1,null,null,null),se=oe.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ComGroup",{attrs:{title:"生效时间"}},[a("el-date-picker",{attrs:{size:"mini",type:"daterange",format:"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateArray,callback:function(t){e.dateArray=t},expression:"dateArray"}})],1)},ce=[],le={components:{ComGroup:ee["a"]},props:{value:{type:Array,default:null}},computed:{dateArray:{get:function(){return this.value},set:function(e){var t=e?[e[0].getTime(),e[1].getTime()]:[];this.$emit("input",t)}}}},ue=le,de=(a("c809"),Object(d["a"])(ue,re,ce,!1,null,"2c86356c",null)),pe=de.exports,ge={name:"PageRight",components:Object(r["a"])({ChangeSetType:F,ComTitle:W,NoSelect:Q,SetPageInfo:se,ComValidTime:pe},Object($["d"])()),data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(C["d"])(["pageData","activeComponentId"])),{},{setType:{get:function(){return this.$store.state.setType},set:function(e){this.$store.commit("SET_SETTYPE",e)}},currentComponent:function(){var e=this,t=this.pageData.componentList;return t&&t.length>0?t.find((function(t){return t.id===e.activeComponentId})):null}}),methods:Object(r["a"])(Object(r["a"])({},Object(C["b"])(["pageChange"])),{},{editComponent:function(e){console.log("修改store数据"),this.pageChange({type:"edit",id:this.activeComponentId,data:e})}})},me=ge,fe=(a("c60b"),Object(d["a"])(me,S,O,!1,null,null,null)),he=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"我的图片",visible:e.dialogImageVisible,"before-close":e.dialogHide,width:"900px"},on:{"update:visible":function(t){e.dialogImageVisible=t}}},[a("el-upload",{ref:"upload",attrs:{action:e.actionUrl,multiple:!1,"list-type":"picture","show-file-list":!1,"on-success":e.dosuccess,"on-error":e.doerror,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.uploading}},[e._v(" + 上传图片 ")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1),e.groupList&&e.groupList.length>0?a("div",{staticClass:"picture-content"},[a("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.groupLoading,expression:"groupLoading"}],staticClass:"picture-group"},e._l(e.groupList,(function(t){return a("li",{key:t.uuid,class:{active:e.selectGroupId===t.uuid},on:{click:function(a){return e.changeGroup(t.uuid)}}},[a("span",{staticClass:"size"},[e._v(e._s(t.count))]),e._v(" "+e._s(t.name)+" ")])})),0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"picture-main"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:e.list&&e.list.length>0,expression:"list && list.length > 0"}],staticClass:"picture-list"},e._l(e.list,(function(t){return a("li",{key:t.uuid,on:{click:function(a){return e.selectPic(t)}}},[a("div",{staticClass:"pic"},[t.pictureUrl?a("img",{attrs:{src:t.pictureUrl}}):e._e()]),a("p",{staticClass:"name"},[e._v(" "+e._s(t.pictureName)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.selectPicId===t.uuid,expression:"selectPicId === item.uuid"}],staticClass:"seleted"},[a("i",{staticClass:"el-icon-check"})])])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.list||0===e.list.length,expression:"!list || list.length === 0"}],staticClass:"no-pic"},[e._v(" 该分类下暂无图片 ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.list&&e.list.length>0,expression:"list && list.length > 0"}],staticClass:"list-page"},[a("el-pagination",{attrs:{background:"","current-page":e.nowPage,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.pageChange}})],1)]):a("div",{staticClass:"no-data"},[e._v(" 图片库中暂无图片 ")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:!e.selectPicUrl},on:{click:e.selectSure}},[e._v(" 确 定 ")]),a("el-button",{on:{click:e.dialogHide}},[e._v(" 取 消 ")])],1)],1)},be=[],Ce=a("365c"),_e={name:"UpLoadImg",props:["dialogImageVisible"],data:function(){return{groupLoading:!1,groupList:[],selectGroupId:"",loading:!1,nowPage:1,total:0,list:[],selectPicId:"",selectPicUrl:"",actionUrl:Ce["d"],uploading:!1}},watch:{dialogImageVisible:function(e,t){e&&this.groupList.length}},methods:{getGroup:function(){var e=this,t={queryParams:{vendorUuid:{operation:"EQ",value:""}}};this.groupLoading=!0,Object(Ce["fetchPictureGroup"])(t).then((function(t){e.groupLoading=!1;var a=t.returnMessage;a&&a.length>0&&(e.groupList=a,e.changeGroup(a[0].uuid))}))},changeGroup:function(e){this.selectGroupId=e,this.getList()},getList:function(){var e=this,t={queryPage:this.nowPage,pageShow:10,queryParams:{vendorUuid:{operation:"EQ",value:""},groupUuid:{operation:"EQ",value:this.selectGroupId}}};this.loading=!0,Object(Ce["fetchPictureList"])(t).then((function(t){e.loading=!1,e.list=t.returnMessage,e.total=t.pager.totalNum}))},pageChange:function(e){this.nowPage=e,this.getList()},selectPic:function(e){this.selectPicId===e.uuid?this.clearSelectPic():(this.selectPicId=e.uuid,this.selectPicUrl=e.pictureUrl)},clearSelectPic:function(){this.selectPicId="",this.selectPicUrl=""},selectSure:function(){this.$emit("upLoadImgSuccess",this.selectPicUrl),this.dialogHide(),this.clearSelectPic()},beforeAvatarUpload:function(e){console.log(e);var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传图片大小不能超过 500kb!"),!(!t||!a)&&(this.uploading=!0,!0)},dosuccess:function(e,t,a){this.uploading=!1,this.$emit("upLoadImgSuccess",e.data),this.dialogHide()},doerror:function(){this.$message.error("上传失败，请稍后重试"),this.uploading=!1},dialogHide:function(){this.$emit("update:dialogImageVisible",!1)}}},Ie=_e,ke=(a("8a60"),Object(d["a"])(Ie,ve,be,!1,null,"1d43147a",null)),Te=ke.exports,Ee={name:"App",components:{PageHead:g,PageLeft:T,PageView:A,PageRight:he,UpLoadImg:Te},data:function(){return{}},computed:{dialogImageVisible:{get:function(){return this.$store.state.dialogImageVisible},set:function(e){this.$store.commit("SET_UPIMAGE_VISIBLE",e)}}},created:function(){this.init()},methods:{init:function(){this.getData()},getData:function(){var e=this,t=this.$route.query.id;t&&Object(c["b"])(t).then((function(t){var a=t.data;e.postDataToH5(a)}))},postDataToH5:function(e){e&&e.componentList&&(e.componentList.forEach((function(e){if(e.data.validTime&&"string"===typeof e.data.validTime&&(e.data.validTime=JSON.parse(e.data.validTime)),!e.id){var t=Object($["b"])();e.id=e.data.component+"-"+t}})),this.$store.commit("UPDATE_COMPONENT",{data:e}),this.$store.commit("VIEW_UPDATE"))},upLoadImgSuccess:function(e){var t=this.$store.state.upLoadImgSuccess;t&&t(e)}}},we=Ee,Pe=Object(d["a"])(we,n,i,!1,null,null,null);t["default"]=Pe.exports},c60b:function(e,t,a){"use strict";a("54b7")},c809:function(e,t,a){"use strict";a("30d8")},d171:function(e,t,a){},d998:function(e,t,a){var n=a("342f");e.exports=/MSIE|Trident/.test(n)},ea2f:function(e,t,a){},f50a:function(e,t,a){"use strict";a("24e9")}}]);
//# sourceMappingURL=chunk-7fdfeef4.5e38e3b3.js.map